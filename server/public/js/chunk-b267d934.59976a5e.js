(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-b267d934"],{"0ae1":function(t,a,e){"use strict";var s=e("6cd8"),r=e.n(s);r.a},6117:function(t,a,e){"use strict";e.r(a);var s=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",[e("loading",{attrs:{loader:"dots",active:t.isLoading,"can-cancel":!1,"is-full-page":!0,"background-color":t.loadingbgColor,color:t.loadingColor},on:{"update:active":function(a){t.isLoading=a}}}),e("div",{staticClass:"row justify-content-center"},[e("div",{staticClass:"col-md-6"},[e("div",{staticClass:"modal fade errorModal",attrs:{tabindex:"-1",role:"dialog","aria-labelledby":"exampleModalLabel","aria-hidden":"true"}},[e("div",{staticClass:"modal-dialog",attrs:{role:"document"}},[e("div",{staticClass:"modal-content"},[t._m(0),e("div",{staticClass:"modal-body"},[e("p",{staticClass:"h3"},[t._v(t._s(t.msg))])]),t._m(1)])])]),e("table",{staticClass:"table mb-3"},[t._m(2),e("tbody",t._l(t.categories,(function(a){return e("tr",{key:a.id},[e("td",{staticClass:"align-middle"},[t._v(t._s(a.name))]),e("td",[e("input",{staticClass:"form-control form-control-sm",attrs:{type:"text"},domProps:{value:a.path}})]),e("td",{staticClass:"align-middle"},[e("form",{on:{submit:function(e){return e.preventDefault(),t.deleteCategory(a.id)}}},[e("button",{staticClass:"btn btn-outline-danger btn-sm",attrs:{type:"submit"}},[t._v(" 刪除 ")])])])])})),0)]),e("ValidationObserver",{staticClass:"form-bg",scopedSlots:t._u([{key:"default",fn:function(a){var s=a.invalid;return[e("form",{on:{submit:function(a){return a.preventDefault(),t.createCategory(a)}}},[e("table",{staticClass:"table"},[e("tr",[e("td",{staticClass:"align-middle"},[e("b",[t._v("新增")])]),e("td",[e("label",{attrs:{for:"name"}},[t._v("分類名稱")]),e("ValidationProvider",{attrs:{rules:"required",name:"名稱"},scopedSlots:t._u([{key:"default",fn:function(a){var s=a.errors;return[e("input",{directives:[{name:"model",rawName:"v-model",value:t.formData.name,expression:"formData.name"}],staticClass:"form-control create-input",attrs:{type:"text",placeholder:"請輸入分類名稱"},domProps:{value:t.formData.name},on:{input:function(a){a.target.composing||t.$set(t.formData,"name",a.target.value)}}}),e("div",{staticClass:"text-danger pt-1"},[t._v(t._s(s[0]))])]}}],null,!0)})],1),e("td",{attrs:{colspan:"2"}},[e("label",{attrs:{for:"path"}},[t._v("路徑")]),e("ValidationProvider",{attrs:{rules:"required",name:"路徑"},scopedSlots:t._u([{key:"default",fn:function(a){var s=a.errors;return[e("input",{directives:[{name:"model",rawName:"v-model",value:t.formData.path,expression:"formData.path"}],staticClass:"form-control create-input",attrs:{type:"text",placeholder:"請輸入分類路徑"},domProps:{value:t.formData.path},on:{input:function(a){a.target.composing||t.$set(t.formData,"path",a.target.value)}}}),e("div",{staticClass:"text-danger pt-1"},[t._v(t._s(s[0]))])]}}],null,!0)})],1)])]),e("div",{staticClass:"text-right pb-3 pr-3"},[e("button",{staticClass:"btn btn-primary",attrs:{type:"submit",disabled:s}},[t._v(" 新增分類 ")])])])]}}])})],1)])],1)},r=[function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"modal-header"},[e("button",{staticClass:"close",attrs:{type:"button","data-dismiss":"modal","aria-label":"Close"}},[e("span",{attrs:{"aria-hidden":"true"}},[t._v("×")])])])},function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"modal-footer"},[e("button",{staticClass:"btn btn-secondary",attrs:{type:"button","data-dismiss":"modal"}},[t._v(" 關閉 ")])])},function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("thead",[e("tr",[e("th",[t._v("名稱")]),e("th",[t._v("路徑")]),e("th",{attrs:{width:"80"}})])])}],o=(e("96cf"),e("1da1")),n=e("1157"),i=e.n(n),l={name:"Categories",metaInfo:{title:"管理文章分類"},data:function(){return{categories:{},formData:{name:"",path:""},msg:"",success:!0,isLoading:!1,loadingbgColor:"#fff",loadingColor:"#000"}},methods:{getCategories:function(){var t=this;this.isLoading=!0;var a=this,e="/api/dashboard/categories";this.$http.get(e).then((function(e){a.categories=e.data.category,t.isLoading=!1})).catch((function(a){t.error=a.message}))},createCategory:function(){var t=this,a=this,e="/api/dashboard/categories/create",s=a.formData;a.isLoading=!0,this.$http.post(e,{data:s}).then((function(e){console.log("已建立:",e),e.data.success?(i()(".create-input").val(""),t.getCategories()):(i()(".create-input").val(""),a.msg=e.data.msg,a.success=e.data.success,i()(".errorModal").modal("show"),a.isLoading=!1)}))},deleteCategory:function(t){var a=this,e="/api/dashboard/categories/delete/".concat(t),s=confirm("確認刪除此分類嗎?");s&&(a.isLoading=!0,this.$http.post(e).then((function(t){t.data.success?(a.msg=t.data.msg,a.success=t.data.success,i()(".errorModal").modal("show"),a.getCategories()):(a.msg=t.data.msg,a.success=t.data.success,i()(".errorModal").modal("show"),a.isLoading=!1)})))}},created:function(){var t=this;return Object(o["a"])(regeneratorRuntime.mark((function a(){return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:t.getCategories();case 1:case"end":return a.stop()}}),a)})))()}},c=l,d=(e("0ae1"),e("2877")),u=Object(d["a"])(c,s,r,!1,null,null,null);a["default"]=u.exports},"6cd8":function(t,a,e){}}]);
//# sourceMappingURL=chunk-b267d934.59976a5e.js.map